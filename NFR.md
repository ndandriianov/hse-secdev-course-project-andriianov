# Нефункциональные требования (NFR) для OKR Tracker

## 1. Время отклика API
- **Требование**: время отклика для всех API эндпоинтов ≤ 200 мс (95-й процентиль)
- **Измерение**: мониторинг времени отклика через метрики FastAPI/Prometheus
- **Критерий приемки**: 95% запросов выполняются за ≤ 200 мс

## 2. Пропускная способность
- **Требование**: поддержка ≥ 1000 одновременных пользователей
- **Измерение**: нагрузочное тестирование с помощью locust/k6
- **Критерий приемки**: система выдерживает 1000 одновременных пользователей без деградации производительности

## 3. Аутентификация и авторизация
- **Требование**: все критичные операции требуют аутентификации
- **Измерение**: автоматическое тестирование безопасности, аудит доступа
- **Критерий приемки**: 100% защищенных эндпоинтов требуют валидный токен

## 4. Защита от атак
- **Требование**: система блокирует пользователя после ≥ 5 неуспешных попыток входа за 3 минуты
- **Измерение**: мониторинг попыток входа, логирование блокировок
- **Критерий приемки**: автоматическая блокировка срабатывает в течение 30 секунд после 5-й попытки

## 5. Консистентность данных
- **Требование**: все операции чтения возвращают актуальные данные в течение ≤ 1 секунды после записи
- **Измерение**: тестирование eventual consistency
- **Критерий приемки**: 99.9% операций чтения возвращают актуальные данные

## 6. Аудит критичных операций
- **Требование**: фиксирование ≥ 80% критичных действий (аутентификация, изменение данных, удаление)
- **Измерение**: анализ логов аудита, покрытие аудитом
- **Критерий приемки**: 80%+ критичных операций логируются в течение 15 секунд

## 7. Мониторинг здоровья системы
- **Требование**: health check эндпоинт отвечает за ≤ 200 мс
- **Измерение**: мониторинг времени отклика /health эндпоинта
- **Критерий приемки**: health check всегда отвечает за ≤ 200 мс

## 8. Покрытие тестами
- **Требование**: покрытие кода тестами ≥ 80% для критичных модулей
- **Измерение**: pytest-cov, анализ покрытия кода
- **Критерий приемки**: 80%+ строк кода покрыты тестами для модулей аутентификации и бизнес-логики
